## RFM-сегментация пользователей

**RFM-сегментация** — это метод анализа пользователей по трем ключевым показателям:

- **Recency (R)** — как давно пользователь совершал последнюю покупку (количество дней с момента последней покупки).
- **Frequency (F)** — как часто пользователь покупает (количество покупок).
- **Monetary (M)** — сколько денег пользователь тратит (общая сумма всех покупок).

Этот метод помогает разделить пользователей на группы в зависимости от их активности и ценности для бизнеса.

### Алгоритм RFM-сегментации

Предположим, что у нас есть датасет с полями: ID транзакции, ID пользователя, дата транзакции и сумма транзакции. Для проведения RFM-сегментации можно использовать следующий алгоритм:

1. Рассчитать для каждого пользователя три показателя:
   - **Recency**: количество дней с момента последней покупки.
   - **Frequency**: количество покупок.
   - **Monetary**: общая сумма всех покупок.

2. Определить квартильные границы (25%, 50%, 75%) для каждого из показателей.

3. Присвоить пользователю оценку от 1 до 4 для каждого из показателей:
   - Для Recency: чем меньше значение, тем выше оценка.
   - Для Frequency и Monetary: чем больше значение, тем выше оценка.

4. Объединить оценки для формирования RFM-класса, состоящего из трех цифр. Например, 344 — это пользователь с высокой частотой покупок и высокой суммой, но с недавней активностью.

### Функция для RFM-сегментации

Написана функция, которая реализует RFM-сегментацию пользователей на основе описанного выше подхода. В результате функция возвращает датасет, где для каждого ID пользователя содержится:

- Количество дней с момента последней покупки.
- Количество покупок.
- Суммарная выручка за все покупки.
- Оценки **Recency**, **Frequency** и **Monetary** по шкале от 1 до 4.
- **RFM-класс** (три цифры, представляющие сегмент пользователя).
